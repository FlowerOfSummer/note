
#### 三次握手

* 客户端发送SYN报文,发送一个序列号给服务端.此时客户端的状态变为SYN_SENT. (SYN=1,syn=x)
* 服务端所收到客户端的SYN报文，将客户端发送的序列号+1,作为自己的确认号发送给客户端,同时将自己的序列号发送给客户端.此时服务端状态变为SYN_RCVD(SYN=1,ACK=1,syn=y,ack=x+1)
* 客户端收到服务端的报文,将服务端发送的序列号+1作为自己的确认号,将服务端发送的确认号作为序列号发送确认报给服务端.此时客户端的状态变为ESTABLISHED(ACK=1,syn=x+1,ack=y+1).服务端收到后也变为ESTABLISHED状态

> 为什么需要三次握手而不是两次握手?
  若只是两次握手,客户端可以确认自己能发出报文,且能接收报文.但是服务端只能确认自己能接收报文,不能确认自己是否能发送报文.即发送的报文客户端是否能接收到

#### 四次挥手

* 客户端发送一个FIN报文,发送一个序列号给服务端,此时客户端状态变为FIN_WITE1（FIN=1,syn=x）
* 服务端收到客户端的FIN报文，发送一个ACK确认报文.将客户端的序列号+1,作为自己的确认号,同时将自己的序列号发送给客户端.此时服务端状态变为CLOSE_WITE(ACK=1,ack=x+1,syn=y)
* 服务端也想断开连接,服务端发送一个FIN报文,同时发送确认号,和自己的序列号.(FIN=1,ACK=1,ack=x+1,syn=w)
* 客户端收到FIN报文,发送一个确认报文.(ACK=1,ack=w+1,syn=x+1)
