#### 进程和线程
进程是资源分配的最小单位，线程是CPU调度的最小单位
- 一个进程就是一个程序的运行实例
>ps: 每启动一个应用程序，操作系统都会为此程序创建一块内存，用来存放代码、数据数据、一个执行任务的主线程，我们把这样的一个运行环境叫进程。
一个进程关闭，操作系统则会回收为该进程分配的内存空间

##### 进程与线程的关系
- 进程中某一线程执行出错，都会导致整个进程的崩溃
- 线程之间共享进程中的公共数据
- 当一个进程关闭之后，操作系统会回收进程所占用的内存
- 进程之间的内容相互隔离

#### 浏览器多进程
- 一个主进程：负责袁燃进程生成的页面图层，用户交互，子管理进程，提供存储等功能
- 一个GPU进程：负责图形处理
- 一个网络进程：负责网络资源的下载
- 多个渲染进程（浏览器的核心部分，一般称为浏览器内核）：默认情况下一个ｔａｂ页一个进程，互不影响
    - 特殊情况１：多个空白ｔａｂ会合成一个进程
    特殊情况２：从一个标签页新开一个标签页当新标签页和当前标签页属于同一站点的话，那么新标签页会复用当前标签页的渲染进程核心任务是将 HTML、CSS 和 JavaScript 转换为网页图层，通知浏览器主线程进行界面显示；渲染进程都是运行在沙箱模式下渲染进程中包含以下线程：
（1）.GUI渲染线程
（2） Javascript引擎线程
（3） 事件触发线程（归属于浏览器而不是JS引擎）
（4）定时触发器线程
（5）异步http请求线程
（6）合成线程
（7）IO线程：处理和其他进程进行通信
GUI渲染线程与JS引擎线程是互斥的，不能一并执行
- 多个插件进程：负责页面中的插件运行；也是运行在沙箱模式下
各进程之间通过 IPC 来通信

以 Chrome 为例，浏览器不仅有多个线程，还有多个进程，如渲染进程、GPU 进程和插件进程等。而每个 tab 标签页都是一个独立的渲染进程，所以一个 tab 异常崩溃后，其他 tab 基本不会被影响。

浏览器的工作原理可以简单概括为以下几个步骤：

1. 用户输入URL：用户在浏览器地址栏中输入URL（统一资源定位符），或点击链接或书签，触发页面加载请求。

2. 发起HTTP请求：浏览器根据URL发起HTTP请求，包括请求方法（GET、POST等）、请求头（如User-Agent、Cookie等）和请求体（对于POST请求）。

3. DNS解析：浏览器将URL中的域名解析为对应的IP地址，通过DNS（域名系统）查询。

4. 建立TCP连接：浏览器与服务器之间建立TCP连接，通过三次握手确保连接的可靠性。

5. 发送HTTP请求：浏览器向服务器发送HTTP请求，包括请求行（URL、请求方法等）、请求头和请求体。

6. 服务器处理请求：服务器接收到请求后，根据请求的URL和参数进行处理，生成响应数据。

7. 接收响应：浏览器接收到服务器返回的响应数据，包括响应状态码、响应头和响应体。

8. 解析响应：浏览器解析响应数据，根据响应头中的Content-Type确定响应体的类型（如HTML、CSS、JavaScript等）。

9. 渲染页面：浏览器根据HTML解析出的DOM树和CSS解析出的样式规则，进行页面布局和渲染，生成渲染树。

10. JavaScript解析和执行：如果页面中包含JavaScript代码，浏览器会解析和执行JavaScript代码，修改DOM树和样式，实现交互和动态效果。

11. 加载资源：浏览器根据解析HTML和执行JavaScript的过程中遇到的外部资源（如图片、样式表、脚本等），发起额外的HTTP请求加载这些资源。
12. 页面完成加载：当所有资源加载完成，页面渲染完毕后，浏览器会触发`DOMContentLoaded`事件，表示页面的初始HTML已经完全加载和解析。

13. 用户交互：用户可以与页面进行交互，包括点击链接、填写表单、滚动页面等操作。浏览器会监听用户的交互事件，并根据事件触发相应的行为。

14. 页面卸载：当用户关闭页面或导航到其他页面时，浏览器会触发`beforeunload`事件，可以用于执行一些清理操作，如保存用户数据或发送统计信息。

15. 渲染更新：如果页面中的内容发生变化（如通过JavaScript修改DOM或CSS样式），浏览器会重新计算布局和渲染，更新页面的显示。

16. 安全性考虑：浏览器实施了一系列安全机制，如同源策略（Same-Origin Policy）和跨站脚本攻击（XSS）防护，以保护用户的隐私和安全。

17. 扩展和插件：浏览器提供了扩展和插件机制，允许开发者根据需求添加额外的功能和定制化的工具。

总体而言，浏览器的工作原理涉及了多个步骤，包括发起HTTP请求、解析响应、渲染页面和处理用户交互等过程。浏览器通过这些步骤将用户输入的URL转化为可视化的网页，并提供丰富的功能和体验。