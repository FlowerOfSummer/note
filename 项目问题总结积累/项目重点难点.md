### 简单介绍


### 做了什么

* 日常业务开发维护
* 抽离公共组件
* 重构

### 难点

* 缓存列表筛选条件及重置
  业务需求，期望我离开当前界面，再回来得时候还是我之前选择的筛选条件。
  想法：利用本地localStorage缓存当前选中参数。
  难点：筛选组件数据回填，缓存数据格式，远程搜索组件数据回填问题。重置缓存一份初始数据，重置时调用初始数据。
  解决：缓存数据格式都以筛选组件抛出的value格式缓存，请求列表时再根据value做相应的获取。
* 关联分析规则配置
  * 业务的复杂性
    6种规则，4种节点.一个规则包含几种固定的节点，但是数量不固定，可以添加删除。节点内还有递归条件，增删改。
  * 数据的复杂性
    对象多层嵌套，树形数据，对应递归组件。
  * 新技术引入
    引入vuex,实践时问题：
      因为大多是绑定的表单数据，存在修改。最开始是没有设定严格模式的，数据从store的getter获得，v-model在模板上，因为考虑到只能通过提交mutations来修改states,所以都在对应的绑定上加了change事件，在change事件上去提交修改。这样在非严格模式下是不会报错的。但是在严格模式下确实会报错的，因为我们的state的数据也是响应式的，直接v-model在模板上，修改时是会同时修改state的，这样就违背了我们之前说的只能通过提交mutations来修改state。
    解决方法：
      再次阅读文档，发现如果在表单中使用state数据，则可以通过计算属性来做。计算属性的get函数返回state中对应的值，set函数中去提交mutations修改。这样就不会再有warnning，而且界面上也不再有很多change事件。
  * 难点解决方案：
    编写模板：将各个节点相同的组件抽离，封装公共组件。编写各个节点组件。
    构造数据：根据模板结构，构造数据。单独配置各个节点的相关信息，基本信息，流程图节点信息，data独立字段，方便传给后端做数据处理。然后配置各个规则信息，包括节点，对应节点最大个数，当前个数，最小个数，方便做节点的增删。
    展示： 最后通过循环规则配置来显示界面节点。
    左右联动：定位，通过isSelected字段来判断选中节点，然后左边配置节点监听该字段做定位。

* 重构：
  * 为什么重构---可维护性
    在开发5015 版本需求时，需要在告警详情在五元组添加受害IP 的资产信息。在没有看代码之前，我以为这是一个小需求，就是加个弹窗而已。然后看了代码之后才知道，并不是这样。一共有6种告警，每一种告警详情展示的字段和模块都会有些不一样。如果在当前代码上去新增需求，需要在每一种告警都加上我这个新的组件，这样的话，之后需要在新增内容时，也得这样去添加。告警详情又只是纯展示，那么只需要我父组件将值传对就好了，更让我坚定了重构的想法。
  * 了解历史需求
    重构之前肯定得先了解历史需求，通过查看之前5013/5014的相关prd，理清了各个告警实际需要展示的模块和字段。
  * 理清代码逻辑
    了解历史需求之后，就该理清现在的代码逻辑。切一个重构的分支，保证在确定重构没问题之前还是使用原分支代码。
  * 抽离公共组件
    最小单元的展示组件，相同的抽离为公共组件，通过数据配置来确定展示内容。
    一共有6块内容，先各自抽离为组件
      基本信息、五元组、载荷内容、规则详情、威胁情报、事件列表
    然后在配置文件配置各个详情的具体内容：
      不同的详情为一个对象数组，每一个对象包含：component,props,data.循环该数组，展示对应内容。

### 收获了什么

* 熟悉了业务流程，独自完成从需求评审到上线的过程。
* 重构组件：学习了先辈的编码技巧，也产生了新的idea
* 增强了沟通能力，需求和产品沟通，接口和后端沟通，bug排查和测试沟通
* 增强了排查问题的能力，debugger调试，console调试，排它调试，数据调试等
